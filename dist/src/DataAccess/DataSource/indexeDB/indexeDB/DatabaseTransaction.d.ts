import { ITableSchema } from "../../../../BusinessLayer/_interface/interface.type.js";
import { Either } from "../../../../Utility/Either/index.js";
import { ConstraintError, TransactionAbortion, TransactionInfo } from "../../../_interface/interface.type.js";
import { ObjectStoreRequestResult } from "./ObjectStore.type.js";
export declare class DatabaseTransaction {
    schema: ITableSchema;
    operationQueue: any[];
    isTransactionInProgress: boolean;
    db: IDBDatabase;
    private errorPassive;
    private finishTransactionCallback;
    private IDBTransaction?;
    private IDBTransactionMode?;
    dead: boolean;
    hasWriteTransaction: boolean;
    dedicateTransaction: Boolean;
    transactionInto: Either<TransactionInfo, TransactionAbortion>;
    constructor(tableSchema: ITableSchema, dedicateTransaction: Boolean, errorPassive: Boolean);
    onDone(fn: (result: Either<TransactionInfo, TransactionAbortion>) => void): void;
    startExecution(): void;
    waitToFinish(): Promise<Either<TransactionInfo, TransactionAbortion | ConstraintError>>;
    enqueueOperation(transaction: any): Promise<Either<ObjectStoreRequestResult, false>>;
    private processOperationQueue;
    private finishWithSuccess;
    private runDoneCallBack;
    private finishWithAbortion;
    private executeOperation;
    abortTransaction(cause: ConstraintError): void;
    commitTransaction(): TransactionInfo;
    private executeTrigger;
    private setTransactionInfo;
    private setTransactionErrorInfo;
    private clearVariables;
    writeTransactionFlag(): void;
    private createTransaction;
    private closeTransaction;
}
